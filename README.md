# web_crawler  
> یک ابزار ماژولار قدرتمند برای خزیدن صفحات وب و استخراج داده‌ها  
> نسخهٔ فعلی: **v0.1.0**  *(لطفاً در صورت انتشار نسخهٔ جدید عدد را به‌روزرسانی نمایید)*

[![Python Version](https://img.shields.io/badge/python-3.10%2B-blue.svg)]()  
[![License](https://img.shields.io/badge/license-MIT-green.svg)]()

---

## 📌 معرفی  
پروژهٔ **web_crawler** به‌منظور فراهم کردن یک چارچوب منعطف، ماژولار و قابل گسترش برای خزیدن (crawling) صفحات وب، استخراج داده‌ها، و مدیریت نتایج طراحی شده است.  
این ابزار با تمرکز بر خوانایی، ساختار مناسب، و قابلیت توسعه برای پروژه‌های واقعی طراحی شده است — چه برای پژوهشگر، چه برای توسعه‌دهنده وب و چه برای پروژه‌های خودکارسازی داده.

ویژگی‌های کلیدی این پروژه:  
- ساختار ماژولار (مثلاً ماژول‌های `client/`, `server/`, `shared/` یا هر ماژول دیگر)  
- امکان تعریف و استفاده از استراتژی‌های مختلف خزیدن  
- استخراج داده‌ها با پیکربندی قابل تنظیم  
- ذخیره‌سازی و مدیریت نتایج به‌صورت قابل توسعه  
- آماده برای گسترش — افزودن ماژول‌های جدید، اتصال به پایگاه داده یا سرویس‌های دیگر  
- مستندات کامل (از جمله این README) برای دسترسی سریع به راهنمایی‌ها

---

## ✅ قابلیت‌ها  
- جداسازی واضح ماژول‌های کلاینت و سرور جهت انطباق با معماری «سرور – کلاینت»  
- سیستم پیکربندی (config) برای کنترل رفتار خزنده (تنظیمات سرعت، هدف، ذخیره‌سازی، …)  
- ساختار پروژه یکپارچه برای تسهیل نگهداری، خوانایی و مشارکت تیمی  
- امکان استفادهٔ آسان و ارتقای آینده‌دار (اضافه‌کردن خزنده‌های جدید، ذخیره در دیتابیس متفاوت، APIهای جدید)  
- استفاده از مدیر بستهٔ مدرن uv که جایگزینی سریع برای pip/venv است

---

## 🧰 پیش‌نیازها  
قبل از اینکه شروع کنید، مطمئن شوید که موارد زیر را دارید:  
- Python نسخهٔ **3.10 یا بالاتر** (یا نسخه‌ای که در پروژهٔ شما تنظیم شده است)  
- نصب و راه‌اندازی مدیر بستهٔ **uv** برای مدیریت محیط مجازی و بسته‌ها  
  - uv یک ابزار مدرن و بسیار سریع نوشته‌شده با Rust است که جایگزین pip/virtualenv می‌شود.  
  - مستندات نصب uv را می‌توانید در راهنمای رسمی ببینید.  
- دسترسی به اینترنت برای دانلود بسته‌ها و اجرای خزنده  
- (اختیاری) سرویس‌ها یا پایگاه داده‌ها اگر قرار است داده‌ها ذخیره شوند (مثلاً PostgreSQL، Redis …)  
- (اختیاری) سرویس صف (queue) اگر معماری پروژه از صف برای پردازش استفاده می‌کند (مثلاً arq یا دیگر ابزارها)

---

## 🚀 راه‌اندازی سریع  
در ادامه دستورالعمل گام‌به‌گام راه‌اندازی پروژه با استفاده از uv آورده شده است:

```bash
# ۱. کلون کردن مخزن  
git clone https://github.com/hamed-py/web_crawler.git  
cd web_crawler  

# ۲. (در صورت نیاز) نصب uv اگر نصب نشده باشد:  
# برای macOS/Linux:
curl -LsSf https://astral.sh/uv/install.sh | sh  
# برای ویندوز:
# powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# ۳. ایجاد محیط مجازی و فعال‌سازی  
uv venv                     # ساخت محیط مجازی (مثلاً .venv)  
uv env activate             # فعال‌سازی محیط (ممکن است دستور در سیستم شما متفاوت باشد)  

# ۴. نصب وابستگی‌ها  
uv pip sync                # همگام‌سازی با فایل lock (در صورت وجود)  
# یا اگر فقط requirements.txt دارید:
uv pip install -r requirements.txt  
🖥 اجرای کامل سیستم (با سه ترمینال)
برای اجرای کامل سیستم، پیشنهاد می‌شود سه ترمینال مجزا باز کنید. در هر سه ترمینال محیط مجازی (.venv) را پس از فعال‌سازی طبق دستور بالا فعال نمایید و اطمینان حاصل کنید که سرویس‌هایی مانند PostgreSQL و Redis در حال اجرا هستند.

🏁 ترمینال ۱: اجرای Worker (arq)
ورکر باید در پس‌زمینه کار کند تا وظایف جستجو را از صف Redis دریافت و پردازش کند.

bash
Copy code
# فرض: محیط مجازی فعال است  
# اجرای arq با تنظیمات WorkerSettings از فایل server/worker.py  
uv run arq server.worker.WorkerSettings  
خروجی مورد انتظار: پیامی مبنی بر اتصال موفق ورکر به Redis و آماده‌به‌کار بودن.

🏁 ترمینال ۲: اجرای سرور API
این بخش، سرور FastAPI مسئول مدیریت API و ارسال وظایف به صف است.

bash
Copy code
# فرض: محیط مجازی فعال است  
uv run uvicorn server.server:app --host 127.0.0.1 --port 8000 --reload  
خروجی مورد انتظار: سرور اکنون روی آدرس http://127.0.0.1:8000 در دسترس است.

🏁 ترمینال ۳: اجرای کلاینت گرافیکی
کلاینت (مثلاً یک برنامۀ Tkinter) اجرا می‌شود. در اولین اجرا، جداول مورد نیاز در پایگاه داده ساخته خواهند شد (با تابع create_db_and_tables_sync).

bash
Copy code
# فرض: محیط مجازی فعال است  
uv run python client/main.py  
